<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>dMarket Demo</title>
		<link rel="stylesheet" href="../../../dojo/resources/dojo.css">
		<link rel="stylesheet" href="../../css/skins/slate.css">
		<style>
			#market {
				width: 550px;
				margin: 20px;
				height: 660px; /* tall enough for 2 rows in gallery view */
			}
			#market .dgrid-scroller {
				position: relative;
				overflow-y: hidden;
			}
			#market .dgrid-header-scroll {
				display: none;
			}
			#market .dgrid-header {
				right: 0;
			}
			/* styles for icon node in various views */
			.icon {
				font-size: 0; /*TODO: is this needed?*/
				background-repeat: no-repeat;
			}
			.gallery .icon {
				width: 180px;
				height: 180px;
				margin: auto;
			}
			/* styles for gallery view */
			.gallery .dgrid-row {
				width: 33%;
				float: left;
				text-align: center;
				padding: 1em 0;
			}

			/*styles for purchase grid*/
			#purchase {
				width: 450px;
				margin: 20px;
				height: 460px; /* tall enough for 2 rows in gallery view */
			}
		</style>
	</head>
	<body class="slate">
		<p>
			<h1>dMarket - Demo for the Web-5 Conference</h1>
		</p>
		
		<div id="market" class="gallery"></div>
		<div id="purchase" class="table"></div>
		<script src="../../../dojo/dojo.js" data-dojo-config="async:1"></script>
		<script>
require(["dgrid/OnDemandGrid", "dgrid/Selection", "dgrid/Keyboard", "dojo/_base/declare", "dojo/on", "dojo/query", "dojo/store/Memory", "dojo/store/Observable", "put-selector/put"],
function(Grid, Selection, Keyboard, declare, on, query, Memory, Observable, put){
	var marketGrid, purchaseGrid, store;

	var galleryRender = function(obj, options){
		// function used for renderRow for gallery view (large tiled thumbnails)
		var div = put("div");
		div.innerHTML = '<div class="icon" style="background-image:url(resources/' +
			obj.icon + '_64.png);">&nbsp;</div><div class="name">' + obj.artist + '</div>';
		return div;
	};
	
	function byId(id) { return document.getElementById(id); }
	
	var marketStore = new Memory({ data: [
		{ id: "aic", artist: "Alice in Chains", icon: "aic", album: "Alice in Chains",
			summary: "", price: "$2.74"
		},{ id: "jof", artist: "Alice in Chains", icon: "jof", album: "Jar of Flies",
			summary: "", price: "$1.54"
		},{
			id: "ava", artist: "Avalanches", icon: "avalanches", album: "Since I Left You",
			summary: "", price: "$6.51"
		}, {
			id: "beck", artist: "Beck", icon: "guero", album: "Guero",
			summary: "", price: "$1.90"
		}, {
			id: "lmfao", artist: "LMFAO", icon: "lmfao", album: "Party Rock",
			summary: "", price: "$0.54"
		}, {
			id: "ma", artist: "Massive Attack", icon: "bluelines", album: "Blue Lines",
			summary: "", price: "$11.52"
		}, {
			id: "no", artist: "No Doubt", icon: "rocksteady", album: "Rock Steady",
			summary: "", price: "$1.22"
		}, {
			id: "pf", artist: "Pink Floyd", icon: "the_wall", album: "The Wall",
			summary: "", price: "$3.34"
		}, {
			id: "sp", artist: "Smashing Pumpkins", icon: "pumpkins", album: "Mellon Collie and the Infinite Sadness",
			summary: "", price: "$7.55"
		}
	] });
	
	marketGrid = new Grid({
		columns: [
			{label: " ", field: "icon", sortable: false	},
			{ label: "Artist", field: "artist" },
			{ label: "Album", field: "album" }
		],
		store: marketStore,
		renderRow: galleryRender,
		showHeader: false
	}, "market");

});
		</script>
	</body>
</html>